---
title: "TradingView In R Notebook"
output: html_notebook
---

```{r setup}
knitr::opts_chunk$set(warning = FALSE, message = FALSE)
library(tradingview)
library(tidyverse)
library(tidyquant)
```

```{r}
data <- iris %>% mutate(
  time = Sys.time() + (row_number() * 60 * 60)
)
data
```

```{r}
aapl <- tq_get("AAPL") %>% mutate(time = date)
appl
```

## Render

~~Doubleclick on chart to interact (by default pointer events are disabled because it interferes with Rmd vertical scrolling in RStudio)~~ Will figure that out later.

```{r}
tradingview(data, list(
  chart = list(
    decimals = 2
  ),
  width = list(
    type = "line",
    width = 1,
    value = "Sepal.Width",
    color = "rgba(255,0,0,0.5)"
  ),
  length = list(
    type = "line",
    width = 1,
    value = "Sepal.Length"
  ),
  length.h = list(
    type = "histogram",
    value = "Sepal.Width",
    base = 3
  )  
), height = 300)
```


```{r}
tradingview(aapl, list(
    chart = list(
      decimals = 2
    ),
    close = list(
      type = "line",
      value = "close"
    )
), height = 400)
```

```{r}
tradingview(aapl, list(
    chart = list(
      decimals = 2,
      margins = list(
        top = 0,
        bottom = 0.2
      )
    ),
    candles = list(
      type = "candles"
    ),
    line = list(
      type = "line",
      color = "rgba(255,0,0,0.2)",
      value = "close"
    ),
    volume = list(
      type = "histogram",
      value = "volume",
      color = "rgba(0,0,0,0.2)",
      overlay = TRUE,
      margins = list(
        top = 0.8,
        bottom = 0
      )
    )
), height = 400)
```
